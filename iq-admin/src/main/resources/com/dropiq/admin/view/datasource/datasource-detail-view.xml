<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<view xmlns="http://jmix.io/schema/flowui/view"
      title="msg://DataSourceDetailView.title"
      focusComponent="form">
    <data>
        <instance id="dataSourceDc"
                  class="com.dropiq.admin.entity.DataSource">
            <fetchPlan extends="_base">
                <property name="headers"/>
                <property name="configuration"/>
            </fetchPlan>
            <loader/>
        </instance>
    </data>
    <actions>
        <action id="saveAction" type="detail_saveClose"/>
        <action id="closeAction" type="detail_close"/>
    </actions>
    <facets>
        <dataLoadCoordinator auto="true"/>
    </facets>
    <layout>
        <tabSheet id="tabSheet" width="100%">
            <tab id="generalTab" label="msg://generalTab">
                <formLayout id="form" dataContainer="dataSourceDc">
                    <textField id="nameField" property="name" required="true"/>
                    <textArea id="descriptionField" property="description" height="4em"/>
                    <comboBox id="sourceTypeField" property="sourceType" required="true"/>
                    <textField id="urlField" property="url" width="100%"/>
                    <comboBox id="statusField" property="status"/>
                </formLayout>
            </tab>
            <tab id="syncTab" label="msg://syncTab">
                <formLayout id="syncForm" dataContainer="dataSourceDc">
                    <checkbox id="autoSyncField" property="autoSync"/>
                    <textField id="syncIntervalHoursField" property="syncIntervalHours"
                               visible="false"/>
                    <textField id="lastSyncField" property="lastSync" readOnly="true"/>
                    <textField id="syncCountField" property="syncCount" readOnly="true"/>
                    <textField id="errorCountField" property="errorCount" readOnly="true"/>
                    <textArea id="lastErrorMessageField" property="lastErrorMessage"
                              readOnly="true" height="4em"/>
                </formLayout>
            </tab>
            <tab id="statisticsTab" label="msg://statisticsTab">
                <formLayout id="statsForm" dataContainer="dataSourceDc">
                    <textField id="totalProductsField" property="totalProducts" readOnly="true"/>
                    <textField id="activeProductsField" property="activeProducts" readOnly="true"/>
                    <textField id="createdAtField" property="createdAt" readOnly="true"/>
                    <textField id="updatedAtField" property="updatedAt" readOnly="true"/>
                </formLayout>
            </tab>
        </tabSheet>
        <hbox id="detailActions">
            <button id="saveAndCloseButton" action="saveAction"/>
            <button id="closeButton" action="closeAction"/>
        </hbox>
    </layout>
</view>